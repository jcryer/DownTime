<!DOCTYPE html>
<html>
<head>
	<script>
		var canvas;
		var ctx;
		const WIDTH = 640;
		const HEIGHT = 480;
		var CookiesX = [];
		var CookiesY = [];

		function cookieCoordinates(){
			for(var i = 0; i < 30; i++){
				cookieX = Math.floor((Math.random() *630) + 1);
				cookieY = Math.floor((Math.random() *470) + 1);
				CookiesX.push(cookieX);
				CookiesY.push(cookieY);
			}
		}

		function mainLoop(){
			ctx.fillStyle = "#FFFFFF";
			ctx.fillRect(0,0,WIDTH,HEIGHT);

			for(var i = 0; i < (CookiesX.length); i++){
				if (CookiesX[i] != "n"){
					x = CookiesX[i];
					y = CookiesY[i];
					ctx.fillStyle = "#FFFFFF";
					ctx.fillRect(0, 0, WIDTH, HEIGHT);
					cookiePic = new Image();
					cookiePic.src = 'Cookies.jpg';
					cookiePic.onload = function(){
						ctx.drawImage(cookiePic, (x - 98), (y - 8), 90, 25);
					}
					ctx.fillStyle = "#7bae73";
					ctx.fillRect(x, y, 10, 10);
					ctx.beginPath();
					ctx.rect(x, y, 10, 10);
					ctx.stroke();
					ctx.beginPath();
					ctx.rect((x - 100), (y - 10), 120, 30);
					ctx.stroke();
				}
			}
		}

		function clickCheck(x, y){
			for(var i = 0; i < (CookiesX.length); i++){
				if (CookiesX != "n"){
					if ((CookiesX[i] <= x && x <= (CookiesX[i] + 10)) && (CookiesY[i] <= y && y <= (CookiesY[i] + 10))){
						CookiesX[i] = "n";
						CookiesY[i] = "n";
						break
					}
				}
			}
		}

		function endGame(){
			x = true;
			for(var i = 0; i < (CookiesX.length); i++){
				if( CookiesX[i] != "n"){
					x = false
				}
			}
			return x;
		}
	</script> 
</head>
<body>

	<canvas id="myCanvas"  width="640" height="480"></canvas>
	<script type="text/javascript">
		canvas = document.getElementById("myCanvas");
		ctx = canvas.getContext("2d");
		cookieCoordinates();
		var d = new Date();
		min = d.getMinutes();
		sec = d.getSeconds();
		StartTime = (60 * min) + sec;
		if (true){
			requestAnimationFrame(mainLoop);

			let canvasElem = document.querySelector("canvas")
			canvasElem.addEventListener("mousedown", function(e)
			{
				let rect = canvasElem.getBoundingClientRect();
				let x = e.clientX - rect.left;
				let y = e.clientY - rect.top;
				clickCheck(x, y);
				requestAnimationFrame(mainLoop);
				stop = endGame();
				if(stop){
					var newD = new Date;
					endMin = newD.getMinutes();
					endSec = newD.getSeconds();
					EndTime = (60 * endMin) + endSec;
					timeTaken = EndTime - StartTime; 
					alert("Time: "+ timeTaken + " seconds");
				}
				})
		}
	</script>

</body>
</html>